<div>
  <p>Welcome, Admin!</p>
  <button routerLink="/home">Logout</button>
</div>

<div class="dashboard-container">
  <h2>Welcome to the Admin Dashboard</h2>
  <div class="search-container">
    <label for="search">Search: </label>
    <input type="text" [(ngModel)]="searchQuery" (ngModelChange)="search()" id="search" />
  </div>

  <!-- Role Filter Section -->
  <div class="filter-container">
    <label for="role">Filter by Role: </label>
    <select id="role" [(ngModel)]="selectedRole" (change)="filterByRole()">
      <option value="All">All</option>
      <option value="Trainer">Trainer</option>
      <option value="Trainee">Trainee</option>
    </select>
  </div>

  <!-- Trainers List -->
  <div *ngIf="selectedRole === 'Trainer' || selectedRole === 'All'">
    <h3>List of Trainers</h3>
    <div *ngIf="trainers.length > 0">
      <table class="data-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let trainer of trainers">
            <td>{{ trainer.username }}</td>
            <td>{{ trainer.email }}</td>
            <td>
              <button (click)="editTrainer(trainer)">Edit</button>
              <button (click)="deleteTrainer(trainer.id)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
      <!-- Display the Edit Trainer Component only when a trainer is selected -->
      <app-edit-trainer *ngIf="selectedTrainer" 
                        [trainer]="selectedTrainer" 
                        (updateTrainer)="updateTrainerInDashboard($event)">
      </app-edit-trainer>
    </div>
    <div *ngIf="trainers.length === 0">No trainers found.</div>
  </div>

  <!-- Trainees List -->
  <div *ngIf="selectedRole === 'Trainee' || selectedRole === 'All'">
    <h3>List of Trainees</h3>
    <div *ngIf="trainees.length > 0">
      <table class="data-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let trainee of trainees">
            <td>{{ trainee.username }}</td>
            <td>{{ trainee.email }}</td>
            <td>
              <button (click)="editTrainee(trainee)">Edit</button>
              <button (click)="deleteTrainee(trainee.id)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
      <!-- Display the Edit Trainee Component only when a trainee is selected -->
      <app-edit-trainee *ngIf="selectedTrainee" 
                        [trainee]="selectedTrainee" 
                        (updateTrainee)="handleUpdatedTrainee($event)">
      </app-edit-trainee>
    </div>
    <div *ngIf="trainees.length === 0">No trainees found.</div>
  </div>

  <!-- Action Buttons -->
  <div class="action-buttons">
    <button (click)="addTrainer()">Add Trainer</button>
    <button (click)="addTrainee()">Add Trainee</button>
  </div>
</div>
